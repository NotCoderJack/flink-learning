buildscript {
    repositories {
        for (mavenRepositoryUrl in project.rootProject.ext.mavenRepositoryUrlList) {
            maven { url(mavenRepositoryUrl) }
        }
    }
}

// TODO construct node environment
plugins {
    id "com.github.node-gradle.node" version "1.3.0"
}

task setRegistry(type: YarnTask) {
    args = ['config', 'set', 'registry', 'https://registry.npm.taobao.org']
}
yarn.dependsOn(setRegistry)

task yarnBuild(type: YarnTask, dependsOn: yarn) {
    inputs.files(fileTree('src'))
    inputs.files(fileTree('public'))
    inputs.file('package.json')
    inputs.file('yarn.lock')

    group = 'node'
    args = ['run', 'build']
}
